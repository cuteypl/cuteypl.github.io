(function(){function e(e){var t=0;for(len=e.length;t<len;t++)e[t].index=t}function t(e,t){var n=e.className.split(" "),a=n.indexOf(t);-1===a?n.push(t):n.splice(a,1),e.className=n.join(" ")}function n(e,t){var n=e.className.split(" "),a=n.indexOf(t);-1===a&&(n.push(t),e.className=n.join(" "))}function a(e,t){var n=e.className.split(" "),a=n.indexOf(t);-1!==a&&(n.splice(a,1),e.className=n.join(" "))}function r(e,t){var n=e.target.index,a=0;for(len=t.length;a<len;a++)t[a].style.display="none";t[n].style.display="block"}function i(e){var t=null;return $.ajax({type:"GET",url:e,async:!1,success:function(e){t=e||[]}}),console.log(t),t}function l(e,t){for(var n=0,a="",r=t.category.length,i=t.category;n<r;n++)a+='<li class="header-catoryLi">'+i[n]+"</li>",e.innerHTML=a;console.log(a)}function s(e,t,n,a){for(var r="",i=[],l=[],s="",c=(n-1)*a,o=0,g=[],u=[],p=0,f=t.length;p<f;p++)if(l=l.concat(t[p].data),o+=t[p].data.length,!(o-c<=0)){if(i.push('<p class="list-category">'+t[p].year+"</p>"),o-c>=a){u.push(a),g=d(l,c,a);break}u.push(o-c),g=d(l,c,o-c)}for(p=0,f=u.length;p<f;p++){var v=0===p?u[p]:u[p]-u[p-1];s='<ul class="list-wrap">$str</ul>'.replace("$str",g.splice(0,v).join("")),r+='<div class="artOrPro-inner">'+i[p]+s+"</div>"}e.innerHTML=r}function c(e,t){for(var n=e.target.innerHTML,a=[],r=0,i=0,l=t.length;i<l;i++)for(var s=0,c=t[i].data.length;s<c;s++)t[i].data[s].mark.includes(n)&&(a[r++]=t[i].data[s]);var o={name:n,data:a};return o}function o(e,t,n,a){var r='<p class="list-category">$categoryName</p>',i="";r=r.replace("$categoryName",t.name),i='<ul class="list-wrap">$str</ul>'.replace("$str",d(t.data,(n-1)*a,a).join("")),r='<div class="artOrPro-inner">'+r+i+"</div>",e.innerHTML=r}function d(e,t,n){for(var a=t,r=[],i=e.length-(t+n)>0?t+n:e.length;a<i;a++)r.push('<li><a href="'+e[a].url+'">'+e[a].title+'</a><time class="time-date">'+e[a].date+"</time></li>");return r}function g(e,t){var n=0;if(1===t){e=e.page;for(var a=0,r=e.length;a<r;a++)n+=e[a].data.length,console.log(n)}else if(2===t){e=e.product;for(a=0,r=e.length;a<r;a++)n+=e[a].data.length}else n=e.length;return n}function u(e,t,n){var a=Math.ceil(t/n);if(a>1){for(var r='<a href="#" class="pagenav-prev">&lt; prev</a>$str1<a href="#" class="pagenav-next">next &gt;</a> ',i="",l=1;l<=a;l++)i+='<a href="javascript:;" class="pagenav-num">'+l+"</a>";e.innerHTML=r.replace("$str1",i)}else e.innerHTML=""}function p(e){var t=e.target.index;0===t?(S=1,s(T,B.page,1,M),u(j,g(B,S),M)):1===t?(S=2,H=i("../json/product.json"),s(T,H.product,1,M),u(j,g(H,S),M),sessionStorage.setItem("productData",JSON.stringify(H))):2===t?(console.log(t=2),H=i("../json/product.json"),s(T,H.product,1,M),u(j,g(H,S),M),sessionStorage.setItem("productData",JSON.stringify(H))):4===t&&(location.href="https://github.com/cuteypl")}function f(e,t,r,i){if("A"===e.target.nodeName){for(var l=0,c=e.currentTarget.children.length;l<c;l++)a(e.currentTarget.children[l],"pagenav-active");var d=e.target.innerHTML;"&lt; prev"===d?(d=e.target.nextSibling.innerHTML,n(e.target.nextSibling,"pagenav-active")):"next &gt;"===d?(d=e.target.previousSibling.innerHTML,n(e.target.previousSibling,"pagenav-active")):n(e.target,"pagenav-active"),3===i?o(t,b,parseInt(d),r):2===i?s(t,H.product,parseInt(d),r):1===i&&s(t,B.page,parseInt(d),r)}}function v(){scrollTo(0,0)}function m(){scrollTo(0,document.body.clientHeight)}const h=document.getElementById("header-btn"),y=document.getElementById("header-tips"),E=document.getElementsByClassName("header-tipsLi"),L=document.getElementById("header-switch").getElementsByTagName("ul"),I=document.getElementById("header-menu"),N=document.getElementById("header-catory"),T=document.getElementById("artOrPro-list"),j=document.getElementById("mid-pagenation"),k=document.getElementById("arrow-up"),x=document.getElementById("arrow-down");var B=null,b=null,H=null,M=15,S=1;B=i("../json/pageinfo.json"),e(E),e(I.getElementsByClassName("header-menuLi")),l(N,B),s(T,B.page,1,M),u(j,g(B,1),M),sessionStorage.setItem("pageinfoData",JSON.stringify(B)),h.addEventListener("click",function(e){t(y,"block")}),y.addEventListener("click",function(e){r(e,L),t(y,"block")}),N.addEventListener("click",function(e){S=3,b=c(e,B.page),o(T,b,1,M),u(j,b.data.length,M)}),I.addEventListener("click",function(e){p(e)}),j.addEventListener("click",function(e){f(e,T,M,S)}),k.addEventListener("click",v),x.addEventListener("click",m)})();