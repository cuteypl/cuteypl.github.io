webpackJsonp([3],{"5g4Q":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var s=n("22O3"),i=n("AYl1"),r={methods:{$_search_selectItem:function(t){var e=s.a.get(i.a,[]);0!==e.length&&(e=e.filter(function(e){return e!==t})),e.unshift(t),s.a.set(i.a,e),location.href="https://s.m.taobao.com/h5?event_submit_do_new_search_auction=1&_input_charset=utf-8&topSearch=1&atype=b&searchfrom=1&action=home%3Aredirect_app_action&from=1&sst=1&n=20&buying=buyitnow&q="+t}}}},"8stH":function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"b",function(){return u});var s=n("//Fk"),i=n.n(s),r=n("mtWM"),o=n.n(r),a=n("cQcd"),c=n("T452"),l=function(){return o.a.get("https://www.imooc.com/api/search/hot",{timeout:c.c}).then(function(t){if(console.log(t),(t=t.data.hotKeyWord)&&t.owner)return t.owner;throw new Error("没有成功获取到数据！")}).catch(function(t){t&&console.log(t)}).then(function(t){return new i.a(function(e){setTimeout(function(){e(t)},1e3)})})},u=function(t){var e={q:t,code:"utf-8",area:"c2c",nick:"",sid:null};return Object(a.a)("https://suggest.taobao.com/sug",e,c.d).then(function(t){if(t.result)return console.log(t),t.result;throw new Error("没有成功获取到数据！")}).catch(function(t){t&&console.log(t)}).then(function(t){return new i.a(function(e){setTimeout(function(){e(t)},1e3)})})}},AYl1:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var s="mall-search-history-keyword-key"},CxcV:function(t,e){},JLQE:function(t,e){},PbsV:function(t,e){},R1mH:function(t,e){},WMgP:function(t,e){},ar59:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("9EIA"),i={name:"BConfirm",props:{title:{type:String,default:""},msg:{type:String,default:"确定执行此操作吗？"},cancelBtnText:{type:String,default:"取消"},confirmBtnText:{type:String,default:"确定"}},data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1},cancel:function(){this.hide(),this.$emit("cancel")},confirm:function(){this.hide(),this.$emit("confirm")}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"mine-confirm"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"mine-confirm-wrapper"},[n("div",{staticClass:"mine-confirm"},[t.title?n("div",{staticClass:"mine-confirm-title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),n("div",{staticClass:"mine-confirm-msg"},[t._v(t._s(t.msg))]),t._v(" "),n("div",{staticClass:"mine-confirm-btns"},[n("button",{staticClass:"mine-confirm-btn mine-confirm-cancel",on:{click:t.cancel}},[t._v(t._s(t.cancelBtnText))]),t._v(" "),n("button",{staticClass:"mine-confirm-btn mine-confirm-ok",on:{click:t.confirm}},[t._v(t._s(t.confirmBtnText))])])])])])},staticRenderFns:[]};var o=n("VU/8")(i,r,!1,function(t){n("JLQE")},"data-v-e0232dc0",null).exports,a=n("8ViO"),c=n("2DVT"),l={name:"SearchHeader",components:{BNavbar:a.a,BSearch:c.a},methods:{goBack:function(){this.$router.back()},query:function(t){this.$emit("query",t)}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("BNavbar",{staticClass:"header"},[e("i",{staticClass:"iconfont icon-back",attrs:{slot:"left"},on:{click:this.goBack},slot:"left"}),this._v(" "),e("BSearch",{attrs:{slot:"center",placeholder:"开学季有礼，好货5折起"},on:{query:this.query},slot:"center"})],1)},staticRenderFns:[]};var h=n("VU/8")(l,u,!1,function(t){n("R1mH")},"data-v-ec300548",null).exports,f=n("//Fk"),m=n.n(f),d=n("G8er"),v=n("8stH"),g=n("5g4Q"),_={name:"SearchHot",components:{BLoading:d.a},data:function(){return{hots:[]}},created:function(){var t=this;this.getHotKeyword().then(function(){t.$emit("loaded")})},mixins:[g.a],methods:{getHotKeyword:function(){var t=this;return Object(v.a)().then(function(e){return new m.a(function(n){e&&(t.hots=e,n())})})}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hot"},[n("h4",{staticClass:"hot-title"},[t._v("热门搜索")]),t._v(" "),t.hots.length?n("ul",{staticClass:"hot-list"},t._l(t.hots,function(e,s){return n("li",{key:s,staticClass:"hot-item",on:{click:function(n){return t.$_search_selectItem(e.hotWord)}}},[t._v(t._s(e.hotWord))])}),0):n("div",{staticClass:"loading-container"},[n("BLoading")],1)])},staticRenderFns:[]};var p=n("VU/8")(_,y,!1,function(t){n("l/uE")},"data-v-b0b17494",null).exports,w=n("22O3"),C=n("AYl1"),b={name:"SearchHistory",data:function(){return{historys:[]}},created:function(){this.getKeyword()},mixins:[g.a],methods:{update:function(){this.getKeyword()},getKeyword:function(){this.historys=w.a.get(C.a,[])},removeItem:function(t){var e=this;this.historys=this.historys.filter(function(e){return e!==t}),w.a.set(C.a,this.historys),setTimeout(function(){e.$emit("remove-item",t)},100)},showConfirm:function(){this.$emit("show-confirm")},clear:function(){w.a.remove(C.a)}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.historys.length?n("div",{staticClass:"history"},[n("h4",{staticClass:"history-title"},[t._v("历史搜索")]),t._v(" "),n("transition-group",{staticClass:"g-list",attrs:{name:"list",tag:"ul"}},t._l(t.historys,function(e){return n("li",{key:e,staticClass:"g-list-item",on:{click:function(n){return t.$_search_selectItem(e)}}},[n("span",{staticClass:"g-list-text"},[t._v(t._s(e))]),t._v(" "),n("i",{staticClass:"iconfont icon-delete",on:{click:function(n){return n.stopPropagation(),t.removeItem(e)}}})])}),0),t._v(" "),n("a",{staticClass:"history-btn",attrs:{href:"javascript:;"},on:{click:t.showConfirm}},[n("i",{staticClass:"iconfont icon-clear"}),t._v("清空历史搜索")])],1):t._e()},staticRenderFns:[]};var x=n("VU/8")(b,S,!1,function(t){n("PbsV")},"data-v-6e64b05d",null).exports,k=n("lc3H"),$={name:"Search",components:{BScroll:s.a,BConfirm:o,SearchHeader:h,SearchHot:p,SearchHistory:x,SearchResult:k.a},data:function(){return{query:""}},methods:{getQuery:function(t){this.query=t},updateScroll:function(){this.$refs.scroll.update()},showConfirm:function(){this.$refs.confirm.show()},clearAllSearchHistorys:function(){this.$refs.history.clear(),this.$refs.history.update()}}},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"search"}},[n("div",{staticClass:"search"},[n("header",{staticClass:"g-header-container"},[n("SearchHeader",{on:{query:t.getQuery}})],1),t._v(" "),n("div",{staticClass:"g-content-container"},[n("BScroll",{ref:"scroll"},[n("SearchHot",{directives:[{name:"show",rawName:"v-show",value:!t.query,expression:"!query"}],on:{loaded:t.updateScroll}}),t._v(" "),n("SearchHistory",{directives:[{name:"show",rawName:"v-show",value:!t.query,expression:"!query"}],ref:"history",on:{"show-confirm":t.showConfirm,"remove-item":t.updateScroll}}),t._v(" "),n("SearchResult",{directives:[{name:"show",rawName:"v-show",value:t.query,expression:"query"}],attrs:{query:t.query}})],1)],1),t._v(" "),n("BConfirm",{ref:"confirm",attrs:{msg:"确定要清空吗？"},on:{confirm:t.clearAllSearchHistorys}})],1)])},staticRenderFns:[]};var q=n("VU/8")($,H,!1,function(t){n("WMgP")},"data-v-24537ca1",null);e.default=q.exports},"l/uE":function(t,e){},lc3H:function(t,e,n){"use strict";var s=n("G8er"),i=n("8stH"),r=n("5g4Q"),o={name:"SearchResult",components:{BLoading:s.a},data:function(){return{results:[],loading:!0}},props:{query:{type:String,default:""}},mixins:[r.a],watch:{query:function(t){this.getResults(t)}},methods:{getResults:function(t){var e=this;t&&(this.loading=!0,Object(i.b)(t).then(function(t){t&&(e.results=t,e.loading=!1)}))}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"result"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading-container"},[n("BLoading")],1),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&t.results.length,expression:"!loading && results.length"}],staticClass:"g-list"},t._l(t.results,function(e,s){return n("li",{key:s,staticClass:"g-list-item",on:{click:function(n){return t.$_search_selectItem(e[0])}}},[n("span",{staticClass:"g-list-text"},[t._v(t._s(e[0]))])])}),0),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&!t.results.length,expression:"!loading && !results.length"}],staticClass:"no-result"},[t._v("没有结果")])])},staticRenderFns:[]};var c=n("VU/8")(o,a,!1,function(t){n("CxcV")},"data-v-5f3a8c09",null);e.a=c.exports}});
//# sourceMappingURL=3.b6ac26a8837db2149cae.js.map